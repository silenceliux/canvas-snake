<!DOCTYPE html>
<html>
<head>
    <title></title>
</head>
<body>
<style>
    *{
        margin: 0;
        padding: 0;
    }
    html,body{
        height:100%;
        width:100%;
    }
    #myCanvas,#myCanvas2{
        display:block;
        position: absolute;
        top: 0;
        left: 0;
    }
    #myCanvas{
        z-index: 2;
    }
    #control{
         width: 10vh;
        height: 10vh;
        border-radius: 50%;
        z-index: 10;
        background-color: gray;
        position: fixed;
        top: 5vh;
        left: 5vh;
    }
    #direction{
        width: 5vh;
        height: 5vh;
        border-radius: 50%;
        z-index: 15;
        background-color: lightgray;
        position: fixed;
        top: 7.5vh;
        left: 7.5vh;
    }
</style>
    <canvas id="myCanvas"></canvas>
    <canvas id="myCanvas2"></canvas>
    <div id="control"><div id="direction"></div></div>
    <script>
        var c1=document.getElementById("myCanvas");
        var c2=document.getElementById("myCanvas2");
        var width = document.body.clientWidth;
        var height = document.body.clientHeight;
        var direction = document.getElementById("direction");
        c1.width = width;
        c1.height = height;
        c2.width = width;
        c2.height = height;
        var cxt1=c1.getContext("2d");
        var cxt2=c2.getContext("2d");
        var snack = [{x:500,y:500}];
        cxt1.fillStyle="#FF0000";
        var addOne={};
        var startX,startY,sportX = 0,sportY = 1;
        direction.addEventListener('touchstart', function (event) {
            var touch = event.touches[0]; //获取第一个触点
            startX = touch.clientX;
            startY = touch.clientY;
        }, false);
        direction.addEventListener('touchmove', function (event) {
            var touch = event.touches[0]; //获取第一个触点
            var x = touch.clientX;
            var y = touch.clientY;
            var moveX,moveY;
            if(x-(height/40) < height/20 ){
                moveX = height/20;
            }
            else if(x-(height/40) > height/10){
                moveX = height/10;
            }
            else{
                moveX = x-(height/40);
            }
            if(y-(height/40) < height/20 ){
                moveY = height/20;
            }
            else if(y-(height/40) > height/10){
                moveY = height/10;
            }
            else{
                moveY = y-(height/40);
            }
            direction.style.left=moveX+"px";
            direction.style.top=moveY+"px";

        }, false);
        direction.addEventListener('touchend', function (event) {
            direction.style.left="7.5vh";
            direction.style.top="7.5vh";
        }, false);

        function init(){
            render();
            apple();
        }
        function render(){
            cxt1.clearRect(0,0,width,height);
            for(var i=0;i<snack.length;i++){
                cxt1.beginPath();
                cxt1.arc(snack[i].x,snack[i].y,15,0,Math.PI*2);
                cxt1.closePath();
                cxt1.fill();
            }
        }
        function addSnack(){
            var obj  ={};
            obj.x = snack[snack.length-1].x;
            obj.y = snack[snack.length-1].y+30;
            snack.push(obj);
            render();
        }
        function apple(){
            cxt2.fillStyle="#00FF00";
            var x = Math.floor(Math.random()*500);
            var y = Math.floor(Math.random()*500);
            cxt2.beginPath();
            cxt2.arc(x,y,10,0,Math.PI*2);
            cxt2.closePath();
            cxt2.fill();
        }
        function sport(){
//            for(var )
        }
       init();
    </script>
</body>
</html>